<html>
<head>
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.2/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.9.2/dist/leaflet.js"></script>
</head>
<body>
	<div id="map" style="width: 600px; height: 400px;"></div>
	<script src="./wasm_exec.js"></script>
	<script>
	  (async () => {
		const go = new Go();
		const { instance } = await WebAssembly.instantiateStreaming(
		  fetch('red.wasm'),
		  go.importObject
		);
		await go.run(instance);
	  })();
	  async function run() {
		console.clear();
		await go.run(inst);
		inst = await WebAssembly.instantiate()
	  }
	</script>
    <script>
		var map = L.map('map');
		L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
		function debug(msgData) {
			var iss_position = JSON.parse(msgData).iss_position;
			map.setView([iss_position.latitude, iss_position.longitude], 6);
			L.marker([iss_position.latitude, iss_position.longitude]).addTo(map);
		}
	</script>
</body>
</html>