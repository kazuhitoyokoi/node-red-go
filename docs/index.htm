<html>
<body>
  <div id="terminal"></div>
  <script src="./wasm_exec.js"></script>
  <script>
    (async () => {
      const go = new Go();
      const { instance } = await WebAssembly.instantiateStreaming(
        fetch('red.wasm'),
        go.importObject
      );
      await go.run(instance);
    })();
    async function run() {
      console.clear();
      await go.run(inst);
      inst = await WebAssembly.instantiate()
    }
  </script>
  <link rel="stylesheet" href="https://unpkg.com/xterm@5.0.0/css/xterm.css">
  <script src="https://unpkg.com/xterm@5.0.0/lib/xterm.js"></script>
  <script>
    let term = new Terminal();
    term.open(document.getElementById('terminal'));
    function runFakeTerminal() {
      if (term._initialized) {
        return;
      }
      term._initialized = true;
    }
    runFakeTerminal()
    function debug(msg) {
      term.writeln(new Date().toUTCString() + " - [info] [debug:debug 1] " + msg);
    }
  </script>
</body>

</html>